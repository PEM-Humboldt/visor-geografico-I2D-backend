# Database Audit Report - Visor I2D Humboldt Project

**Generated:** 2025-08-15 15:09:03
**Container:** visor_i2d_db
**Database:** i2d_db
**User:** i2d_user

## Executive Summary

This report contains the results of comprehensive database verification queries and backend application queries to document the current state of the database structure, schemas, permissions, configuration, and performance metrics.

---

## Database Infrastructure Verification

### Database Connection Information

- **Execution Time**: 119ms
- **File Location**: System Query
- **Purpose**: Verify database connectivity and version

**Query:**
```sql
SELECT current_user, current_database(), version();
```

**Result:**
- **Rows Returned**: 1
```
i2d_user|i2d_db|PostgreSQL 16.4 on x86_64-pc-linux-musl, compiled by gcc (Alpine 13.2.1_git20240309) 13.2.1 20240309, 64-bit
```

---

### All Available Schemas

- **Execution Time**: 57ms
- **File Location**: System Query
- **Purpose**: List all database schemas

**Query:**
```sql
SELECT schema_name FROM information_schema.schemata ORDER BY schema_name;
```

**Result:**
- **Rows Returned**: 17
```
capas_base
django
ecoreservas
gbif_consultas
gef
geovisor
gobernanza
historicos_iavh
information_schema
pg_catalog
pg_toast
public
tiger
tiger_data
topology
viveros
weplan
```

---

### Schemas Accessible to Current User

- **Execution Time**: 68ms
- **File Location**: System Query
- **Purpose**: Check schema access permissions

**Query:**
```sql
SELECT nspname AS schema_name FROM pg_namespace WHERE has_schema_privilege(current_user, nspname, 'USAGE') ORDER BY nspname;
```

**Result:**
- **Rows Returned**: 17
```
capas_base
django
ecoreservas
gbif_consultas
gef
geovisor
gobernanza
historicos_iavh
information_schema
pg_catalog
pg_toast
public
tiger
tiger_data
topology
viveros
weplan
```

---

### Current Search Path

- **Execution Time**: 55ms
- **File Location**: System Query
- **Purpose**: Verify Django search path configuration

**Query:**
```sql
SHOW search_path;
```

**Result:**
- **Rows Returned**: 1
```
"$user", public, topology, tiger
```

---

### Expected Schemas Existence Check

- **Execution Time**: 78ms
- **File Location**: System Query
- **Purpose**: Validate expected schema configuration

**Query:**
```sql
SELECT EXISTS(SELECT 1 FROM pg_namespace WHERE nspname = 'capas_base') AS capas_base_exists, EXISTS(SELECT 1 FROM pg_namespace WHERE nspname = 'geovisor') AS geovisor_exists, EXISTS(SELECT 1 FROM pg_namespace WHERE nspname = 'django') AS django_exists, EXISTS(SELECT 1 FROM pg_namespace WHERE nspname = 'gbif_consultas') AS gbif_consultas_exists;
```

**Result:**
- **Rows Returned**: 1
```
t|t|t|t
```

---

### Detailed Schema Permissions

- **Execution Time**: 68ms
- **File Location**: System Query
- **Purpose**: Analyze user permissions per schema

**Query:**
```sql
SELECT n.nspname AS schema_name, has_schema_privilege(current_user, n.nspname, 'USAGE') AS can_use, has_schema_privilege(current_user, n.nspname, 'CREATE') AS can_create FROM pg_namespace n WHERE n.nspname NOT LIKE 'pg_%' AND n.nspname != 'information_schema' ORDER BY n.nspname;
```

**Result:**
- **Rows Returned**: 14
```
capas_base|t|t
django|t|t
ecoreservas|t|t
gbif_consultas|t|t
gef|t|t
geovisor|t|t
gobernanza|t|t
historicos_iavh|t|t
public|t|t
tiger|t|t
tiger_data|t|t
topology|t|t
viveros|t|t
weplan|t|t
```

---

### Tables by Schema

- **Execution Time**: 61ms
- **File Location**: System Query
- **Purpose**: Inventory all accessible tables

**Query:**
```sql
SELECT schemaname, tablename, tableowner FROM pg_tables WHERE schemaname NOT IN ('information_schema', 'pg_catalog') ORDER BY schemaname, tablename;
```

**Result:**
- **Rows Returned**: 124
```
capas_base|cars|i2d_user
capas_base|dpto_politico|i2d_user
capas_base|dpto_politico2020|i2d_user
capas_base|dpto_politico2021|i2d_user
capas_base|mpio_politico|i2d_user
capas_base|mpio_politico2020|i2d_user
capas_base|mpio_politico2021|i2d_user
django|auth_group|i2d_user
django|auth_group_permissions|i2d_user
django|auth_permission|i2d_user
django|auth_user|i2d_user
django|auth_user_groups|i2d_user
django|auth_user_user_permissions|i2d_user
django|django_admin_log|i2d_user
django|django_content_type|i2d_user
django|django_migrations|i2d_user
django|django_session|i2d_user
ecoreservas|p_best_comp|i2d_user
ecoreservas|p_best_comp1|i2d_user
ecoreservas|p_best_unopor_s|i2d_user
ecoreservas|p_best_vol|i2d_user
ecoreservas|p_best_vol_s|i2d_user
ecoreservas|p_renta_comp|i2d_user
ecoreservas|p_renta_unopor_s|i2d_user
ecoreservas|p_renta_vol|i2d_user
ecoreservas|p_renta_vol_s|i2d_user
ecoreservas|p_res_comp|i2d_user
ecoreservas|p_res_vol|i2d_user
ecoreservas|p_rest_unopor_s|i2d_user
ecoreservas|p_rest_vol_s|i2d_user
ecoreservas|r_best_comp|i2d_user
ecoreservas|r_best_unopor_s|i2d_user
ecoreservas|r_best_vol|i2d_user
ecoreservas|r_best_vol_s|i2d_user
ecoreservas|r_renta_comp|i2d_user
ecoreservas|r_renta_unopor_s|i2d_user
ecoreservas|r_renta_vol|i2d_user
ecoreservas|r_renta_vol_s|i2d_user
ecoreservas|r_res_comp|i2d_user
ecoreservas|r_res_vol|i2d_user
ecoreservas|r_rest_unopor_s|i2d_user
ecoreservas|r_rest_vol_s|i2d_user
ecoreservas|us_best_comp|i2d_user
ecoreservas|us_best_unopor_s|i2d_user
ecoreservas|us_best_vol|i2d_user
ecoreservas|us_best_vol_s|i2d_user
ecoreservas|us_renta_comp|i2d_user
ecoreservas|us_renta_unopor_s|i2d_user
ecoreservas|us_renta_vol|i2d_user
ecoreservas|us_renta_vol_s|i2d_user
ecoreservas|us_res_comp|i2d_user
ecoreservas|us_res_vol|i2d_user
ecoreservas|us_rest_unopor_s|i2d_user
ecoreservas|us_rest_vol_s|i2d_user
gbif_consultas|cars_queries_new|i2d_user
gbif_consultas|dpto_amenazas|i2d_user
gbif_consultas|dpto_queries|i2d_user
gbif_consultas|gbif_info|i2d_user
gbif_consultas|mpio_amenazas|i2d_user
gbif_consultas|mpio_queries|i2d_user
gef|municipio|i2d_user
gef|paramo|i2d_user
geovisor|solicitud|i2d_user
gobernanza|procesos_gobernanza|i2d_user
historicos_iavh|BST2018|i2d_user
historicos_iavh|Registros_Biologicos_IAvH|i2d_user
historicos_iavh|aicas|i2d_user
historicos_iavh|atlas_paramos_250k_2007|i2d_user
historicos_iavh|bosque_seco_tropical|i2d_user
historicos_iavh|complejos_paramos_escala100k|i2d_user
historicos_iavh|ecosistemas_generales_etter|i2d_user
historicos_iavh|ecosistemas_orinoquia|i2d_user
historicos_iavh|grado_transformacion_humedales_m10k|i2d_user
historicos_iavh|munparqgis|i2d_user
historicos_iavh|paramo250|i2d_user
public|spatial_ref_sys|i2d_user
public|tilepage|i2d_user
public|tileset|i2d_user
tiger|addr|i2d_user
tiger|addrfeat|i2d_user
tiger|bg|i2d_user
tiger|county|i2d_user
tiger|county_lookup|i2d_user
tiger|countysub_lookup|i2d_user
tiger|cousub|i2d_user
tiger|direction_lookup|i2d_user
tiger|edges|i2d_user
tiger|faces|i2d_user
tiger|featnames|i2d_user
tiger|geocode_settings|i2d_user
tiger|geocode_settings_default|i2d_user
tiger|loader_lookuptables|i2d_user
tiger|loader_platform|i2d_user
tiger|loader_variables|i2d_user
tiger|pagc_gaz|i2d_user
tiger|pagc_lex|i2d_user
tiger|pagc_rules|i2d_user
tiger|place|i2d_user
tiger|place_lookup|i2d_user
tiger|secondary_unit_lookup|i2d_user
tiger|state|i2d_user
tiger|state_lookup|i2d_user
tiger|street_type_lookup|i2d_user
tiger|tabblock|i2d_user
tiger|tabblock20|i2d_user
tiger|tract|i2d_user
tiger|zcta5|i2d_user
tiger|zip_lookup|i2d_user
tiger|zip_lookup_all|i2d_user
tiger|zip_lookup_base|i2d_user
tiger|zip_state|i2d_user
tiger|zip_state_loc|i2d_user
topology|layer|i2d_user
topology|topology|i2d_user
viveros|red_viveros|i2d_user
viveros|red_viveros2024|i2d_user
viveros|red_viveros_ant|i2d_user
weplan|mincost_target4|i2d_user
weplan|scen_mincost_target1|i2d_user
weplan|scen_mincost_target2|i2d_user
weplan|scen_mincost_target3|i2d_user
weplan|scen_mincost_target4|i2d_user
weplan|target1_1millon_ce|i2d_user
weplan|target4_6millon_ce|i2d_user
```

---

### Database Sizes

- **Execution Time**: 55ms
- **File Location**: System Query
- **Purpose**: Monitor database storage usage

**Query:**
```sql
SELECT pg_database.datname, pg_size_pretty(pg_database_size(pg_database.datname)) AS size FROM pg_database ORDER BY pg_database_size(pg_database.datname) DESC;
```

**Result:**
- **Rows Returned**: 5
```
i2d_db|3390 MB
template_postgis|18 MB
postgres|15 MB
template1|7409 kB
template0|7345 kB
```

---

### Current Database Connections

- **Execution Time**: 57ms
- **File Location**: System Query
- **Purpose**: Monitor active database connections

**Query:**
```sql
SELECT datname, usename, application_name, client_addr, state, query_start FROM pg_stat_activity WHERE datname = current_database();
```

**Result:**
- **Rows Returned**: 3
```
i2d_db|i2d_user|PostgreSQL JDBC Driver|172.25.0.5|idle|2025-08-15 20:07:29.452723+00
i2d_db|i2d_user|DataGrip 2025.2.2|172.25.0.1|idle|2025-08-15 20:07:48.840917+00
i2d_db|i2d_user|psql||active|2025-08-15 20:09:03.718883+00
```

---

### PostGIS Version Information

- **Execution Time**: 79ms
- **File Location**: System Query
- **Purpose**: Verify PostGIS extension status

**Query:**
```sql
SELECT PostGIS_Version();
```

**Result:**
- **Rows Returned**: 1
```
3.4 USE_GEOS=1 USE_PROJ=1 USE_STATS=1
```

---

### Installed Extensions

- **Execution Time**: 56ms
- **File Location**: System Query
- **Purpose**: List all database extensions

**Query:**
```sql
SELECT extname, extversion FROM pg_extension ORDER BY extname;
```

**Result:**
- **Rows Returned**: 5
```
fuzzystrmatch|1.2
plpgsql|1.0
postgis|3.4.3
postgis_tiger_geocoder|3.4.3
postgis_topology|3.4.3
```

---

### Table Counts by Schema

- **Execution Time**: 54ms
- **File Location**: System Query
- **Purpose**: Analyze table distribution per schema

**Query:**
```sql
SELECT schemaname, COUNT(*) as table_count FROM pg_tables WHERE schemaname NOT IN ('information_schema', 'pg_catalog') GROUP BY schemaname ORDER BY schemaname;
```

**Result:**
- **Rows Returned**: 13
```
capas_base|7
django|10
ecoreservas|37
gbif_consultas|6
gef|2
geovisor|1
gobernanza|1
historicos_iavh|11
public|3
tiger|34
topology|2
viveros|3
weplan|7
```

---

### Database Indexes

- **Execution Time**: 93ms
- **File Location**: System Query
- **Purpose**: Inventory database indexes for optimization

**Query:**
```sql
SELECT schemaname, tablename, indexname, indexdef FROM pg_indexes WHERE schemaname NOT IN ('information_schema', 'pg_catalog') ORDER BY schemaname, tablename, indexname;
```

**Result:**
- **Rows Returned**: 235
```
capas_base|cars|cars2019_geom_idx|CREATE INDEX cars2019_geom_idx ON capas_base.cars USING gist (geom)
capas_base|cars|cars2019_pkey|CREATE UNIQUE INDEX cars2019_pkey ON capas_base.cars USING btree (gid)
capas_base|dpto_politico|dpto_politico_2023_geom_idx|CREATE INDEX dpto_politico_2023_geom_idx ON capas_base.dpto_politico USING gist (geom)
capas_base|dpto_politico|dpto_politico_2023_pkey|CREATE UNIQUE INDEX dpto_politico_2023_pkey ON capas_base.dpto_politico USING btree (gid)
capas_base|dpto_politico2020|dpto_politic_geom_idx|CREATE INDEX dpto_politic_geom_idx ON capas_base.dpto_politico2020 USING gist (geom)
capas_base|dpto_politico2020|dpto_politic_pkey|CREATE UNIQUE INDEX dpto_politic_pkey ON capas_base.dpto_politico2020 USING btree (gid)
capas_base|dpto_politico2021|depto_politico2021_geom_idx|CREATE INDEX depto_politico2021_geom_idx ON capas_base.dpto_politico2021 USING gist (geom)
capas_base|dpto_politico2021|depto_politico2021_pkey|CREATE UNIQUE INDEX depto_politico2021_pkey ON capas_base.dpto_politico2021 USING btree (gid)
capas_base|mpio_politico|idx_mupio_politico_dpto_gin|CREATE INDEX idx_mupio_politico_dpto_gin ON capas_base.mpio_politico USING gin (to_tsvector('spanish'::regconfig, (dpto_nombre)::text))
capas_base|mpio_politico|idx_mupio_politico_nombre_gin|CREATE INDEX idx_mupio_politico_nombre_gin ON capas_base.mpio_politico USING gin (to_tsvector('spanish'::regconfig, (nombre)::text))
capas_base|mpio_politico|mpio_politico_2023_geom_idx|CREATE INDEX mpio_politico_2023_geom_idx ON capas_base.mpio_politico USING gist (geom)
capas_base|mpio_politico|mpio_politico_2023_pkey|CREATE UNIQUE INDEX mpio_politico_2023_pkey ON capas_base.mpio_politico USING btree (gid)
capas_base|mpio_politico2020|mpio_politic_geom_idx|CREATE INDEX mpio_politic_geom_idx ON capas_base.mpio_politico2020 USING gist (geom)
capas_base|mpio_politico2020|mpio_politic_pkey|CREATE UNIQUE INDEX mpio_politic_pkey ON capas_base.mpio_politico2020 USING btree (gid)
capas_base|mpio_politico2021|mpio_politico2021_geom_idx1|CREATE INDEX mpio_politico2021_geom_idx1 ON capas_base.mpio_politico2021 USING gist (geom)
capas_base|mpio_politico2021|mpio_politico2021_pkey1|CREATE UNIQUE INDEX mpio_politico2021_pkey1 ON capas_base.mpio_politico2021 USING btree (gid)
django|auth_group|auth_group_name_a6ea08ec_like|CREATE INDEX auth_group_name_a6ea08ec_like ON django.auth_group USING btree (name varchar_pattern_ops)
django|auth_group|auth_group_name_key|CREATE UNIQUE INDEX auth_group_name_key ON django.auth_group USING btree (name)
django|auth_group|auth_group_pkey|CREATE UNIQUE INDEX auth_group_pkey ON django.auth_group USING btree (id)
django|auth_group_permissions|auth_group_permissions_group_id_b120cbf9|CREATE INDEX auth_group_permissions_group_id_b120cbf9 ON django.auth_group_permissions USING btree (group_id)
django|auth_group_permissions|auth_group_permissions_group_id_permission_id_0cd325b0_uniq|CREATE UNIQUE INDEX auth_group_permissions_group_id_permission_id_0cd325b0_uniq ON django.auth_group_permissions USING btree (group_id, permission_id)
django|auth_group_permissions|auth_group_permissions_permission_id_84c5c92e|CREATE INDEX auth_group_permissions_permission_id_84c5c92e ON django.auth_group_permissions USING btree (permission_id)
django|auth_group_permissions|auth_group_permissions_pkey|CREATE UNIQUE INDEX auth_group_permissions_pkey ON django.auth_group_permissions USING btree (id)
django|auth_permission|auth_permission_content_type_id_2f476e4b|CREATE INDEX auth_permission_content_type_id_2f476e4b ON django.auth_permission USING btree (content_type_id)
django|auth_permission|auth_permission_content_type_id_codename_01ab375a_uniq|CREATE UNIQUE INDEX auth_permission_content_type_id_codename_01ab375a_uniq ON django.auth_permission USING btree (content_type_id, codename)
django|auth_permission|auth_permission_pkey|CREATE UNIQUE INDEX auth_permission_pkey ON django.auth_permission USING btree (id)
django|auth_user|auth_user_pkey|CREATE UNIQUE INDEX auth_user_pkey ON django.auth_user USING btree (id)
django|auth_user|auth_user_username_6821ab7c_like|CREATE INDEX auth_user_username_6821ab7c_like ON django.auth_user USING btree (username varchar_pattern_ops)
django|auth_user|auth_user_username_key|CREATE UNIQUE INDEX auth_user_username_key ON django.auth_user USING btree (username)
django|auth_user_groups|auth_user_groups_group_id_97559544|CREATE INDEX auth_user_groups_group_id_97559544 ON django.auth_user_groups USING btree (group_id)
django|auth_user_groups|auth_user_groups_pkey|CREATE UNIQUE INDEX auth_user_groups_pkey ON django.auth_user_groups USING btree (id)
django|auth_user_groups|auth_user_groups_user_id_6a12ed8b|CREATE INDEX auth_user_groups_user_id_6a12ed8b ON django.auth_user_groups USING btree (user_id)
django|auth_user_groups|auth_user_groups_user_id_group_id_94350c0c_uniq|CREATE UNIQUE INDEX auth_user_groups_user_id_group_id_94350c0c_uniq ON django.auth_user_groups USING btree (user_id, group_id)
django|auth_user_user_permissions|auth_user_user_permissions_permission_id_1fbb5f2c|CREATE INDEX auth_user_user_permissions_permission_id_1fbb5f2c ON django.auth_user_user_permissions USING btree (permission_id)
django|auth_user_user_permissions|auth_user_user_permissions_pkey|CREATE UNIQUE INDEX auth_user_user_permissions_pkey ON django.auth_user_user_permissions USING btree (id)
django|auth_user_user_permissions|auth_user_user_permissions_user_id_a95ead1b|CREATE INDEX auth_user_user_permissions_user_id_a95ead1b ON django.auth_user_user_permissions USING btree (user_id)
django|auth_user_user_permissions|auth_user_user_permissions_user_id_permission_id_14a6b632_uniq|CREATE UNIQUE INDEX auth_user_user_permissions_user_id_permission_id_14a6b632_uniq ON django.auth_user_user_permissions USING btree (user_id, permission_id)
django|django_admin_log|django_admin_log_content_type_id_c4bce8eb|CREATE INDEX django_admin_log_content_type_id_c4bce8eb ON django.django_admin_log USING btree (content_type_id)
django|django_admin_log|django_admin_log_pkey|CREATE UNIQUE INDEX django_admin_log_pkey ON django.django_admin_log USING btree (id)
django|django_admin_log|django_admin_log_user_id_c564eba6|CREATE INDEX django_admin_log_user_id_c564eba6 ON django.django_admin_log USING btree (user_id)
django|django_content_type|django_content_type_app_label_model_76bd3d3b_uniq|CREATE UNIQUE INDEX django_content_type_app_label_model_76bd3d3b_uniq ON django.django_content_type USING btree (app_label, model)
django|django_content_type|django_content_type_pkey|CREATE UNIQUE INDEX django_content_type_pkey ON django.django_content_type USING btree (id)
django|django_migrations|django_migrations_pkey|CREATE UNIQUE INDEX django_migrations_pkey ON django.django_migrations USING btree (id)
django|django_session|django_session_expire_date_a5c62663|CREATE INDEX django_session_expire_date_a5c62663 ON django.django_session USING btree (expire_date)
django|django_session|django_session_pkey|CREATE UNIQUE INDEX django_session_pkey ON django.django_session USING btree (session_key)
django|django_session|django_session_session_key_c0390e0f_like|CREATE INDEX django_session_session_key_c0390e0f_like ON django.django_session USING btree (session_key varchar_pattern_ops)
ecoreservas|p_best_comp|p_best_comp_geom_idx|CREATE INDEX p_best_comp_geom_idx ON ecoreservas.p_best_comp USING gist (geom)
ecoreservas|p_best_comp|p_best_comp_pkey|CREATE UNIQUE INDEX p_best_comp_pkey ON ecoreservas.p_best_comp USING btree (gid)
ecoreservas|p_best_unopor_s|p_best_unopor_s_geom_idx|CREATE INDEX p_best_unopor_s_geom_idx ON ecoreservas.p_best_unopor_s USING gist (geom)
ecoreservas|p_best_unopor_s|p_best_unopor_s_pkey|CREATE UNIQUE INDEX p_best_unopor_s_pkey ON ecoreservas.p_best_unopor_s USING btree (gid)
ecoreservas|p_best_vol|p_best_vol_geom_idx|CREATE INDEX p_best_vol_geom_idx ON ecoreservas.p_best_vol USING gist (geom)
ecoreservas|p_best_vol|p_best_vol_pkey|CREATE UNIQUE INDEX p_best_vol_pkey ON ecoreservas.p_best_vol USING btree (gid)
ecoreservas|p_best_vol_s|p_best_vol_s_geom_idx|CREATE INDEX p_best_vol_s_geom_idx ON ecoreservas.p_best_vol_s USING gist (geom)
ecoreservas|p_best_vol_s|p_best_vol_s_pkey|CREATE UNIQUE INDEX p_best_vol_s_pkey ON ecoreservas.p_best_vol_s USING btree (gid)
ecoreservas|p_renta_comp|p_renta_comp_geom_idx|CREATE INDEX p_renta_comp_geom_idx ON ecoreservas.p_renta_comp USING gist (geom)
ecoreservas|p_renta_comp|p_renta_comp_pkey|CREATE UNIQUE INDEX p_renta_comp_pkey ON ecoreservas.p_renta_comp USING btree (gid)
ecoreservas|p_renta_unopor_s|p_renta_unopor_s_geom_idx|CREATE INDEX p_renta_unopor_s_geom_idx ON ecoreservas.p_renta_unopor_s USING gist (geom)
ecoreservas|p_renta_unopor_s|p_renta_unopor_s_pkey|CREATE UNIQUE INDEX p_renta_unopor_s_pkey ON ecoreservas.p_renta_unopor_s USING btree (gid)
ecoreservas|p_renta_vol|p_renta_vol_geom_idx|CREATE INDEX p_renta_vol_geom_idx ON ecoreservas.p_renta_vol USING gist (geom)
ecoreservas|p_renta_vol|p_renta_vol_pkey|CREATE UNIQUE INDEX p_renta_vol_pkey ON ecoreservas.p_renta_vol USING btree (gid)
ecoreservas|p_renta_vol_s|p_renta_vol_s_geom_idx|CREATE INDEX p_renta_vol_s_geom_idx ON ecoreservas.p_renta_vol_s USING gist (geom)
ecoreservas|p_renta_vol_s|p_renta_vol_s_pkey|CREATE UNIQUE INDEX p_renta_vol_s_pkey ON ecoreservas.p_renta_vol_s USING btree (gid)
ecoreservas|p_res_comp|p_res_comp_geom_idx|CREATE INDEX p_res_comp_geom_idx ON ecoreservas.p_res_comp USING gist (geom)
ecoreservas|p_res_comp|p_res_comp_pkey|CREATE UNIQUE INDEX p_res_comp_pkey ON ecoreservas.p_res_comp USING btree (gid)
ecoreservas|p_res_vol|p_res_vol_geom_idx|CREATE INDEX p_res_vol_geom_idx ON ecoreservas.p_res_vol USING gist (geom)
ecoreservas|p_res_vol|p_res_vol_pkey|CREATE UNIQUE INDEX p_res_vol_pkey ON ecoreservas.p_res_vol USING btree (gid)
ecoreservas|p_rest_unopor_s|p_rest_unopor_s_geom_idx|CREATE INDEX p_rest_unopor_s_geom_idx ON ecoreservas.p_rest_unopor_s USING gist (geom)
ecoreservas|p_rest_unopor_s|p_rest_unopor_s_pkey|CREATE UNIQUE INDEX p_rest_unopor_s_pkey ON ecoreservas.p_rest_unopor_s USING btree (gid)
ecoreservas|p_rest_vol_s|p_rest_vol_s_geom_idx|CREATE INDEX p_rest_vol_s_geom_idx ON ecoreservas.p_rest_vol_s USING gist (geom)
ecoreservas|p_rest_vol_s|p_rest_vol_s_pkey|CREATE UNIQUE INDEX p_rest_vol_s_pkey ON ecoreservas.p_rest_vol_s USING btree (gid)
ecoreservas|r_best_comp|r_best_comp_geom_idx|CREATE INDEX r_best_comp_geom_idx ON ecoreservas.r_best_comp USING gist (geom)
ecoreservas|r_best_comp|r_best_comp_pkey|CREATE UNIQUE INDEX r_best_comp_pkey ON ecoreservas.r_best_comp USING btree (gid)
ecoreservas|r_best_unopor_s|r_best_unopor_s_geom_idx|CREATE INDEX r_best_unopor_s_geom_idx ON ecoreservas.r_best_unopor_s USING gist (geom)
ecoreservas|r_best_unopor_s|r_best_unopor_s_pkey|CREATE UNIQUE INDEX r_best_unopor_s_pkey ON ecoreservas.r_best_unopor_s USING btree (gid)
ecoreservas|r_best_vol|r_best_vol_geom_idx|CREATE INDEX r_best_vol_geom_idx ON ecoreservas.r_best_vol USING gist (geom)
ecoreservas|r_best_vol|r_best_vol_pkey|CREATE UNIQUE INDEX r_best_vol_pkey ON ecoreservas.r_best_vol USING btree (gid)
ecoreservas|r_best_vol_s|r_best_vol_s_geom_idx|CREATE INDEX r_best_vol_s_geom_idx ON ecoreservas.r_best_vol_s USING gist (geom)
ecoreservas|r_best_vol_s|r_best_vol_s_pkey|CREATE UNIQUE INDEX r_best_vol_s_pkey ON ecoreservas.r_best_vol_s USING btree (gid)
ecoreservas|r_renta_comp|r_renta_comp_geom_idx|CREATE INDEX r_renta_comp_geom_idx ON ecoreservas.r_renta_comp USING gist (geom)
ecoreservas|r_renta_comp|r_renta_comp_pkey|CREATE UNIQUE INDEX r_renta_comp_pkey ON ecoreservas.r_renta_comp USING btree (gid)
ecoreservas|r_renta_unopor_s|r_renta_unopor_s_geom_idx|CREATE INDEX r_renta_unopor_s_geom_idx ON ecoreservas.r_renta_unopor_s USING gist (geom)
ecoreservas|r_renta_unopor_s|r_renta_unopor_s_pkey|CREATE UNIQUE INDEX r_renta_unopor_s_pkey ON ecoreservas.r_renta_unopor_s USING btree (gid)
ecoreservas|r_renta_vol|r_renta_vol_geom_idx|CREATE INDEX r_renta_vol_geom_idx ON ecoreservas.r_renta_vol USING gist (geom)
ecoreservas|r_renta_vol|r_renta_vol_pkey|CREATE UNIQUE INDEX r_renta_vol_pkey ON ecoreservas.r_renta_vol USING btree (gid)
ecoreservas|r_renta_vol_s|r_renta_vol_s_geom_idx|CREATE INDEX r_renta_vol_s_geom_idx ON ecoreservas.r_renta_vol_s USING gist (geom)
ecoreservas|r_renta_vol_s|r_renta_vol_s_pkey|CREATE UNIQUE INDEX r_renta_vol_s_pkey ON ecoreservas.r_renta_vol_s USING btree (gid)
ecoreservas|r_res_comp|r_res_comp_geom_idx|CREATE INDEX r_res_comp_geom_idx ON ecoreservas.r_res_comp USING gist (geom)
ecoreservas|r_res_comp|r_res_comp_pkey|CREATE UNIQUE INDEX r_res_comp_pkey ON ecoreservas.r_res_comp USING btree (gid)
ecoreservas|r_res_vol|r_res_vol_geom_idx|CREATE INDEX r_res_vol_geom_idx ON ecoreservas.r_res_vol USING gist (geom)
ecoreservas|r_res_vol|r_res_vol_pkey|CREATE UNIQUE INDEX r_res_vol_pkey ON ecoreservas.r_res_vol USING btree (gid)
ecoreservas|r_rest_unopor_s|r_rest_unopor_s_geom_idx|CREATE INDEX r_rest_unopor_s_geom_idx ON ecoreservas.r_rest_unopor_s USING gist (geom)
ecoreservas|r_rest_unopor_s|r_rest_unopor_s_pkey|CREATE UNIQUE INDEX r_rest_unopor_s_pkey ON ecoreservas.r_rest_unopor_s USING btree (gid)
ecoreservas|r_rest_vol_s|r_rest_vol_s_geom_idx|CREATE INDEX r_rest_vol_s_geom_idx ON ecoreservas.r_rest_vol_s USING gist (geom)
ecoreservas|r_rest_vol_s|r_rest_vol_s_pkey|CREATE UNIQUE INDEX r_rest_vol_s_pkey ON ecoreservas.r_rest_vol_s USING btree (gid)
ecoreservas|us_best_comp|us_best_comp_geom_idx|CREATE INDEX us_best_comp_geom_idx ON ecoreservas.us_best_comp USING gist (geom)
ecoreservas|us_best_comp|us_best_comp_pkey|CREATE UNIQUE INDEX us_best_comp_pkey ON ecoreservas.us_best_comp USING btree (gid)
ecoreservas|us_best_unopor_s|us_best_unopor_s_geom_idx|CREATE INDEX us_best_unopor_s_geom_idx ON ecoreservas.us_best_unopor_s USING gist (geom)
ecoreservas|us_best_unopor_s|us_best_unopor_s_pkey|CREATE UNIQUE INDEX us_best_unopor_s_pkey ON ecoreservas.us_best_unopor_s USING btree (gid)
ecoreservas|us_best_vol|us_best_vol_geom_idx|CREATE INDEX us_best_vol_geom_idx ON ecoreservas.us_best_vol USING gist (geom)
ecoreservas|us_best_vol|us_best_vol_pkey|CREATE UNIQUE INDEX us_best_vol_pkey ON ecoreservas.us_best_vol USING btree (gid)
ecoreservas|us_best_vol_s|us_best_vol_s_geom_idx|CREATE INDEX us_best_vol_s_geom_idx ON ecoreservas.us_best_vol_s USING gist (geom)
ecoreservas|us_best_vol_s|us_best_vol_s_pkey|CREATE UNIQUE INDEX us_best_vol_s_pkey ON ecoreservas.us_best_vol_s USING btree (gid)
ecoreservas|us_renta_comp|us_renta_comp_geom_idx|CREATE INDEX us_renta_comp_geom_idx ON ecoreservas.us_renta_comp USING gist (geom)
ecoreservas|us_renta_comp|us_renta_comp_pkey|CREATE UNIQUE INDEX us_renta_comp_pkey ON ecoreservas.us_renta_comp USING btree (gid)
ecoreservas|us_renta_unopor_s|us_renta_unopor_s_geom_idx|CREATE INDEX us_renta_unopor_s_geom_idx ON ecoreservas.us_renta_unopor_s USING gist (geom)
ecoreservas|us_renta_unopor_s|us_renta_unopor_s_pkey|CREATE UNIQUE INDEX us_renta_unopor_s_pkey ON ecoreservas.us_renta_unopor_s USING btree (gid)
ecoreservas|us_renta_vol|us_renta_vol_geom_idx|CREATE INDEX us_renta_vol_geom_idx ON ecoreservas.us_renta_vol USING gist (geom)
ecoreservas|us_renta_vol|us_renta_vol_pkey|CREATE UNIQUE INDEX us_renta_vol_pkey ON ecoreservas.us_renta_vol USING btree (gid)
ecoreservas|us_renta_vol_s|us_renta_vol_s_geom_idx|CREATE INDEX us_renta_vol_s_geom_idx ON ecoreservas.us_renta_vol_s USING gist (geom)
ecoreservas|us_renta_vol_s|us_renta_vol_s_pkey|CREATE UNIQUE INDEX us_renta_vol_s_pkey ON ecoreservas.us_renta_vol_s USING btree (gid)
ecoreservas|us_res_comp|us_res_comp_geom_idx|CREATE INDEX us_res_comp_geom_idx ON ecoreservas.us_res_comp USING gist (geom)
ecoreservas|us_res_comp|us_res_comp_pkey|CREATE UNIQUE INDEX us_res_comp_pkey ON ecoreservas.us_res_comp USING btree (gid)
ecoreservas|us_res_vol|us_res_vol_geom_idx|CREATE INDEX us_res_vol_geom_idx ON ecoreservas.us_res_vol USING gist (geom)
ecoreservas|us_res_vol|us_res_vol_pkey|CREATE UNIQUE INDEX us_res_vol_pkey ON ecoreservas.us_res_vol USING btree (gid)
ecoreservas|us_rest_unopor_s|us_rest_unopor_s_geom_idx|CREATE INDEX us_rest_unopor_s_geom_idx ON ecoreservas.us_rest_unopor_s USING gist (geom)
ecoreservas|us_rest_unopor_s|us_rest_unopor_s_pkey|CREATE UNIQUE INDEX us_rest_unopor_s_pkey ON ecoreservas.us_rest_unopor_s USING btree (gid)
ecoreservas|us_rest_vol_s|us_rest_vol_s_geom_idx|CREATE INDEX us_rest_vol_s_geom_idx ON ecoreservas.us_rest_vol_s USING gist (geom)
ecoreservas|us_rest_vol_s|us_rest_vol_s_pkey|CREATE UNIQUE INDEX us_rest_vol_s_pkey ON ecoreservas.us_rest_vol_s USING btree (gid)
gbif_consultas|dpto_amenazas|idx_dpto_amenazas_codigo|CREATE INDEX idx_dpto_amenazas_codigo ON gbif_consultas.dpto_amenazas USING btree (codigo) WHERE (tipo IS NOT NULL)
gbif_consultas|dpto_amenazas|idx_dpto_amenazas_geom|CREATE INDEX idx_dpto_amenazas_geom ON gbif_consultas.dpto_amenazas USING gist (geom)
gbif_consultas|dpto_queries|idx_dpto_queries_codigo_tipo|CREATE INDEX idx_dpto_queries_codigo_tipo ON gbif_consultas.dpto_queries USING btree (codigo, tipo) WHERE (tipo IS NOT NULL)
gbif_consultas|dpto_queries|idx_dpto_queries_geom|CREATE INDEX idx_dpto_queries_geom ON gbif_consultas.dpto_queries USING gist (geom)
gbif_consultas|dpto_queries|idx_dpto_species_stats|CREATE INDEX idx_dpto_species_stats ON gbif_consultas.dpto_queries USING btree (species, endemicas, exoticas)
gbif_consultas|mpio_amenazas|idx_mpio_amenazas_codigo|CREATE INDEX idx_mpio_amenazas_codigo ON gbif_consultas.mpio_amenazas USING btree (codigo) WHERE (tipo IS NOT NULL)
gbif_consultas|mpio_amenazas|idx_mpio_amenazas_geom|CREATE INDEX idx_mpio_amenazas_geom ON gbif_consultas.mpio_amenazas USING gist (geom)
gbif_consultas|mpio_queries|idx_mpio_queries_codigo_tipo|CREATE INDEX idx_mpio_queries_codigo_tipo ON gbif_consultas.mpio_queries USING btree (codigo, tipo) WHERE (tipo IS NOT NULL)
gbif_consultas|mpio_queries|idx_mpio_queries_geom|CREATE INDEX idx_mpio_queries_geom ON gbif_consultas.mpio_queries USING gist (geom)
gbif_consultas|mpio_queries|idx_mpio_species_stats|CREATE INDEX idx_mpio_species_stats ON gbif_consultas.mpio_queries USING btree (species, endemicas, exoticas)
gef|municipio|municipio_geom_idx|CREATE INDEX municipio_geom_idx ON gef.municipio USING gist (geom)
gef|municipio|municipio_pkey|CREATE UNIQUE INDEX municipio_pkey ON gef.municipio USING btree (gid)
gef|paramo|paramo_geom_idx|CREATE INDEX paramo_geom_idx ON gef.paramo USING gist (geom)
gef|paramo|paramo_pkey|CREATE UNIQUE INDEX paramo_pkey ON gef.paramo USING btree (gid)
geovisor|solicitud|solicitud_pkey|CREATE UNIQUE INDEX solicitud_pkey ON geovisor.solicitud USING btree (id_solicitud)
gobernanza|procesos_gobernanza|procesos_gobernanza4326_geom_idx|CREATE INDEX procesos_gobernanza4326_geom_idx ON gobernanza.procesos_gobernanza USING gist (geom)
gobernanza|procesos_gobernanza|procesos_gobernanza4326_pkey|CREATE UNIQUE INDEX procesos_gobernanza4326_pkey ON gobernanza.procesos_gobernanza USING btree (gid)
historicos_iavh|BST2018|BST2018_geom_idx|CREATE INDEX "BST2018_geom_idx" ON historicos_iavh."BST2018" USING gist (geom)
historicos_iavh|BST2018|BST2018_pkey|CREATE UNIQUE INDEX "BST2018_pkey" ON historicos_iavh."BST2018" USING btree (gid)
public|spatial_ref_sys|spatial_ref_sys_pkey|CREATE UNIQUE INDEX spatial_ref_sys_pkey ON public.spatial_ref_sys USING btree (srid)
public|tilepage|tilepage_frequency|CREATE INDEX tilepage_frequency ON public.tilepage USING btree (frequency_of_use DESC)
public|tilepage|tilepage_last_access|CREATE INDEX tilepage_last_access ON public.tilepage USING btree (last_access_time_minutes DESC)
public|tilepage|tilepage_pkey|CREATE UNIQUE INDEX tilepage_pkey ON public.tilepage USING btree (key)
public|tilepage|tilepage_tileset|CREATE INDEX tilepage_tileset ON public.tilepage USING btree (tileset_id, fill_factor)
public|tileset|tileset_layer|CREATE INDEX tileset_layer ON public.tileset USING btree (layer_name)
public|tileset|tileset_pkey|CREATE UNIQUE INDEX tileset_pkey ON public.tileset USING btree (key)
tiger|addr|addr_pkey|CREATE UNIQUE INDEX addr_pkey ON tiger.addr USING btree (gid)
tiger|addr|idx_tiger_addr_tlid_statefp|CREATE INDEX idx_tiger_addr_tlid_statefp ON tiger.addr USING btree (tlid, statefp)
tiger|addr|idx_tiger_addr_zip|CREATE INDEX idx_tiger_addr_zip ON tiger.addr USING btree (zip)
tiger|addrfeat|addrfeat_pkey|CREATE UNIQUE INDEX addrfeat_pkey ON tiger.addrfeat USING btree (gid)
tiger|addrfeat|idx_addrfeat_geom_gist|CREATE INDEX idx_addrfeat_geom_gist ON tiger.addrfeat USING gist (the_geom)
tiger|addrfeat|idx_addrfeat_tlid|CREATE INDEX idx_addrfeat_tlid ON tiger.addrfeat USING btree (tlid)
tiger|addrfeat|idx_addrfeat_zipl|CREATE INDEX idx_addrfeat_zipl ON tiger.addrfeat USING btree (zipl)
tiger|addrfeat|idx_addrfeat_zipr|CREATE INDEX idx_addrfeat_zipr ON tiger.addrfeat USING btree (zipr)
tiger|bg|bg_pkey|CREATE UNIQUE INDEX bg_pkey ON tiger.bg USING btree (bg_id)
tiger|county|idx_tiger_county|CREATE INDEX idx_tiger_county ON tiger.county USING btree (countyfp)
tiger|county|pk_tiger_county|CREATE UNIQUE INDEX pk_tiger_county ON tiger.county USING btree (cntyidfp)
tiger|county|uidx_county_gid|CREATE UNIQUE INDEX uidx_county_gid ON tiger.county USING btree (gid)
tiger|county_lookup|county_lookup_name_idx|CREATE INDEX county_lookup_name_idx ON tiger.county_lookup USING btree (soundex((name)::text))
tiger|county_lookup|county_lookup_pkey|CREATE UNIQUE INDEX county_lookup_pkey ON tiger.county_lookup USING btree (st_code, co_code)
tiger|county_lookup|county_lookup_state_idx|CREATE INDEX county_lookup_state_idx ON tiger.county_lookup USING btree (state)
tiger|countysub_lookup|countysub_lookup_name_idx|CREATE INDEX countysub_lookup_name_idx ON tiger.countysub_lookup USING btree (soundex((name)::text))
tiger|countysub_lookup|countysub_lookup_pkey|CREATE UNIQUE INDEX countysub_lookup_pkey ON tiger.countysub_lookup USING btree (st_code, co_code, cs_code)
tiger|countysub_lookup|countysub_lookup_state_idx|CREATE INDEX countysub_lookup_state_idx ON tiger.countysub_lookup USING btree (state)
tiger|cousub|cousub_pkey|CREATE UNIQUE INDEX cousub_pkey ON tiger.cousub USING btree (cosbidfp)
tiger|cousub|tige_cousub_the_geom_gist|CREATE INDEX tige_cousub_the_geom_gist ON tiger.cousub USING gist (the_geom)
tiger|cousub|uidx_cousub_gid|CREATE UNIQUE INDEX uidx_cousub_gid ON tiger.cousub USING btree (gid)
tiger|direction_lookup|direction_lookup_abbrev_idx|CREATE INDEX direction_lookup_abbrev_idx ON tiger.direction_lookup USING btree (abbrev)
tiger|direction_lookup|direction_lookup_pkey|CREATE UNIQUE INDEX direction_lookup_pkey ON tiger.direction_lookup USING btree (name)
tiger|edges|edges_pkey|CREATE UNIQUE INDEX edges_pkey ON tiger.edges USING btree (gid)
tiger|edges|idx_edges_tlid|CREATE INDEX idx_edges_tlid ON tiger.edges USING btree (tlid)
tiger|edges|idx_tiger_edges_countyfp|CREATE INDEX idx_tiger_edges_countyfp ON tiger.edges USING btree (countyfp)
tiger|edges|idx_tiger_edges_the_geom_gist|CREATE INDEX idx_tiger_edges_the_geom_gist ON tiger.edges USING gist (the_geom)
tiger|faces|faces_pkey|CREATE UNIQUE INDEX faces_pkey ON tiger.faces USING btree (gid)
tiger|faces|idx_tiger_faces_countyfp|CREATE INDEX idx_tiger_faces_countyfp ON tiger.faces USING btree (countyfp)
tiger|faces|idx_tiger_faces_tfid|CREATE INDEX idx_tiger_faces_tfid ON tiger.faces USING btree (tfid)
tiger|faces|tiger_faces_the_geom_gist|CREATE INDEX tiger_faces_the_geom_gist ON tiger.faces USING gist (the_geom)
tiger|featnames|featnames_pkey|CREATE UNIQUE INDEX featnames_pkey ON tiger.featnames USING btree (gid)
tiger|featnames|idx_tiger_featnames_lname|CREATE INDEX idx_tiger_featnames_lname ON tiger.featnames USING btree (lower((name)::text))
tiger|featnames|idx_tiger_featnames_snd_name|CREATE INDEX idx_tiger_featnames_snd_name ON tiger.featnames USING btree (soundex((name)::text))
tiger|featnames|idx_tiger_featnames_tlid_statefp|CREATE INDEX idx_tiger_featnames_tlid_statefp ON tiger.featnames USING btree (tlid, statefp)
tiger|geocode_settings|geocode_settings_pkey|CREATE UNIQUE INDEX geocode_settings_pkey ON tiger.geocode_settings USING btree (name)
tiger|geocode_settings_default|geocode_settings_default_pkey|CREATE UNIQUE INDEX geocode_settings_default_pkey ON tiger.geocode_settings_default USING btree (name)
tiger|loader_lookuptables|loader_lookuptables_pkey|CREATE UNIQUE INDEX loader_lookuptables_pkey ON tiger.loader_lookuptables USING btree (lookup_name)
tiger|loader_platform|loader_platform_pkey|CREATE UNIQUE INDEX loader_platform_pkey ON tiger.loader_platform USING btree (os)
tiger|loader_variables|loader_variables_pkey|CREATE UNIQUE INDEX loader_variables_pkey ON tiger.loader_variables USING btree (tiger_year)
tiger|pagc_gaz|pagc_gaz_pkey|CREATE UNIQUE INDEX pagc_gaz_pkey ON tiger.pagc_gaz USING btree (id)
tiger|pagc_lex|pagc_lex_pkey|CREATE UNIQUE INDEX pagc_lex_pkey ON tiger.pagc_lex USING btree (id)
tiger|pagc_rules|pagc_rules_pkey|CREATE UNIQUE INDEX pagc_rules_pkey ON tiger.pagc_rules USING btree (id)
tiger|place|place_pkey|CREATE UNIQUE INDEX place_pkey ON tiger.place USING btree (plcidfp)
tiger|place|tiger_place_the_geom_gist|CREATE INDEX tiger_place_the_geom_gist ON tiger.place USING gist (the_geom)
tiger|place|uidx_tiger_place_gid|CREATE UNIQUE INDEX uidx_tiger_place_gid ON tiger.place USING btree (gid)
tiger|place_lookup|place_lookup_name_idx|CREATE INDEX place_lookup_name_idx ON tiger.place_lookup USING btree (soundex((name)::text))
tiger|place_lookup|place_lookup_pkey|CREATE UNIQUE INDEX place_lookup_pkey ON tiger.place_lookup USING btree (st_code, pl_code)
tiger|place_lookup|place_lookup_state_idx|CREATE INDEX place_lookup_state_idx ON tiger.place_lookup USING btree (state)
tiger|secondary_unit_lookup|secondary_unit_lookup_abbrev_idx|CREATE INDEX secondary_unit_lookup_abbrev_idx ON tiger.secondary_unit_lookup USING btree (abbrev)
tiger|secondary_unit_lookup|secondary_unit_lookup_pkey|CREATE UNIQUE INDEX secondary_unit_lookup_pkey ON tiger.secondary_unit_lookup USING btree (name)
tiger|state|idx_tiger_state_the_geom_gist|CREATE INDEX idx_tiger_state_the_geom_gist ON tiger.state USING gist (the_geom)
tiger|state|pk_tiger_state|CREATE UNIQUE INDEX pk_tiger_state ON tiger.state USING btree (statefp)
tiger|state|uidx_tiger_state_gid|CREATE UNIQUE INDEX uidx_tiger_state_gid ON tiger.state USING btree (gid)
tiger|state|uidx_tiger_state_stusps|CREATE UNIQUE INDEX uidx_tiger_state_stusps ON tiger.state USING btree (stusps)
tiger|state_lookup|state_lookup_abbrev_key|CREATE UNIQUE INDEX state_lookup_abbrev_key ON tiger.state_lookup USING btree (abbrev)
tiger|state_lookup|state_lookup_name_key|CREATE UNIQUE INDEX state_lookup_name_key ON tiger.state_lookup USING btree (name)
tiger|state_lookup|state_lookup_pkey|CREATE UNIQUE INDEX state_lookup_pkey ON tiger.state_lookup USING btree (st_code)
tiger|state_lookup|state_lookup_statefp_key|CREATE UNIQUE INDEX state_lookup_statefp_key ON tiger.state_lookup USING btree (statefp)
tiger|street_type_lookup|street_type_lookup_abbrev_idx|CREATE INDEX street_type_lookup_abbrev_idx ON tiger.street_type_lookup USING btree (abbrev)
tiger|street_type_lookup|street_type_lookup_pkey|CREATE UNIQUE INDEX street_type_lookup_pkey ON tiger.street_type_lookup USING btree (name)
tiger|tabblock|tabblock_pkey|CREATE UNIQUE INDEX tabblock_pkey ON tiger.tabblock USING btree (tabblock_id)
tiger|tabblock20|pk_tabblock20|CREATE UNIQUE INDEX pk_tabblock20 ON tiger.tabblock20 USING btree (geoid)
tiger|tract|tract_pkey|CREATE UNIQUE INDEX tract_pkey ON tiger.tract USING btree (tract_id)
tiger|zcta5|pk_tiger_zcta5_zcta5ce|CREATE UNIQUE INDEX pk_tiger_zcta5_zcta5ce ON tiger.zcta5 USING btree (zcta5ce, statefp)
tiger|zcta5|uidx_tiger_zcta5_gid|CREATE UNIQUE INDEX uidx_tiger_zcta5_gid ON tiger.zcta5 USING btree (gid)
tiger|zip_lookup|zip_lookup_pkey|CREATE UNIQUE INDEX zip_lookup_pkey ON tiger.zip_lookup USING btree (zip)
tiger|zip_lookup_base|zip_lookup_base_pkey|CREATE UNIQUE INDEX zip_lookup_base_pkey ON tiger.zip_lookup_base USING btree (zip)
tiger|zip_state|zip_state_pkey|CREATE UNIQUE INDEX zip_state_pkey ON tiger.zip_state USING btree (zip, stusps)
tiger|zip_state_loc|zip_state_loc_pkey|CREATE UNIQUE INDEX zip_state_loc_pkey ON tiger.zip_state_loc USING btree (zip, stusps, place)
topology|layer|layer_pkey|CREATE UNIQUE INDEX layer_pkey ON topology.layer USING btree (topology_id, layer_id)
topology|layer|layer_schema_name_table_name_feature_column_key|CREATE UNIQUE INDEX layer_schema_name_table_name_feature_column_key ON topology.layer USING btree (schema_name, table_name, feature_column)
topology|topology|topology_name_key|CREATE UNIQUE INDEX topology_name_key ON topology.topology USING btree (name)
topology|topology|topology_pkey|CREATE UNIQUE INDEX topology_pkey ON topology.topology USING btree (id)
viveros|red_viveros|red_viveros_pkey2|CREATE UNIQUE INDEX red_viveros_pkey2 ON viveros.red_viveros USING btree (gid)
viveros|red_viveros2024|red_viveros_pkey1|CREATE UNIQUE INDEX red_viveros_pkey1 ON viveros.red_viveros2024 USING btree (gid)
viveros|red_viveros_ant|red_viveros_pkey|CREATE UNIQUE INDEX red_viveros_pkey ON viveros.red_viveros_ant USING btree (gid)
weplan|mincost_target4|mincost_target4_geom_idx|CREATE INDEX mincost_target4_geom_idx ON weplan.mincost_target4 USING gist (geom)
weplan|mincost_target4|mincost_target4_pkey|CREATE UNIQUE INDEX mincost_target4_pkey ON weplan.mincost_target4 USING btree (gid)
weplan|scen_mincost_target1|scen_mincost_target1_geom_idx|CREATE INDEX scen_mincost_target1_geom_idx ON weplan.scen_mincost_target1 USING gist (geom)
weplan|scen_mincost_target1|scen_mincost_target1_pkey|CREATE UNIQUE INDEX scen_mincost_target1_pkey ON weplan.scen_mincost_target1 USING btree (gid)
weplan|scen_mincost_target2|scen_mincost_target2_geom_idx|CREATE INDEX scen_mincost_target2_geom_idx ON weplan.scen_mincost_target2 USING gist (geom)
weplan|scen_mincost_target2|scen_mincost_target2_pkey|CREATE UNIQUE INDEX scen_mincost_target2_pkey ON weplan.scen_mincost_target2 USING btree (gid)
weplan|scen_mincost_target3|scen_mincost_target3_geom_idx|CREATE INDEX scen_mincost_target3_geom_idx ON weplan.scen_mincost_target3 USING gist (geom)
weplan|scen_mincost_target3|scen_mincost_target3_pkey|CREATE UNIQUE INDEX scen_mincost_target3_pkey ON weplan.scen_mincost_target3 USING btree (gid)
weplan|scen_mincost_target4|scen_mincost_target4_geom_idx|CREATE INDEX scen_mincost_target4_geom_idx ON weplan.scen_mincost_target4 USING gist (geom)
weplan|scen_mincost_target4|scen_mincost_target4_pkey|CREATE UNIQUE INDEX scen_mincost_target4_pkey ON weplan.scen_mincost_target4 USING btree (gid)
weplan|target1_1millon_ce|target1_1millon_ce_geom_idx|CREATE INDEX target1_1millon_ce_geom_idx ON weplan.target1_1millon_ce USING gist (geom)
weplan|target1_1millon_ce|target1_1millon_ce_pkey|CREATE UNIQUE INDEX target1_1millon_ce_pkey ON weplan.target1_1millon_ce USING btree (gid)
weplan|target4_6millon_ce|target4_6millon_ce_geom_idx|CREATE INDEX target4_6millon_ce_geom_idx ON weplan.target4_6millon_ce USING gist (geom)
weplan|target4_6millon_ce|target4_6millon_ce_pkey|CREATE UNIQUE INDEX target4_6millon_ce_pkey ON weplan.target4_6millon_ce USING btree (gid)
```

---

### Foreign Key Constraints

- **Execution Time**: 97ms
- **File Location**: System Query
- **Purpose**: Document referential integrity constraints

**Query:**
```sql
SELECT tc.table_schema, tc.constraint_name, tc.table_name, kcu.column_name, ccu.table_schema AS foreign_table_schema, ccu.table_name AS foreign_table_name, ccu.column_name AS foreign_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name AND tc.table_schema = kcu.table_schema JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name AND ccu.table_schema = tc.table_schema WHERE tc.constraint_type = 'FOREIGN KEY' ORDER BY tc.table_schema, tc.table_name;
```

**Result:**
- **Rows Returned**: 11
```
django|auth_group_permissions_group_id_b120cbf9_fk_auth_group_id|auth_group_permissions|group_id|django|auth_group|id
django|auth_group_permissio_permission_id_84c5c92e_fk_auth_perm|auth_group_permissions|permission_id|django|auth_permission|id
django|auth_permission_content_type_id_2f476e4b_fk_django_co|auth_permission|content_type_id|django|django_content_type|id
django|auth_user_groups_group_id_97559544_fk_auth_group_id|auth_user_groups|group_id|django|auth_group|id
django|auth_user_groups_user_id_6a12ed8b_fk_auth_user_id|auth_user_groups|user_id|django|auth_user|id
django|auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm|auth_user_user_permissions|permission_id|django|auth_permission|id
django|auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id|auth_user_user_permissions|user_id|django|auth_user|id
django|django_admin_log_content_type_id_c4bce8eb_fk_django_co|django_admin_log|content_type_id|django|django_content_type|id
django|django_admin_log_user_id_c564eba6_fk_auth_user_id|django_admin_log|user_id|django|auth_user|id
public|tilepage_tileset_id_fkey|tilepage|tileset_id|public|tileset|key
topology|layer_topology_id_fkey|layer|topology_id|topology|topology|id
```

---

## Backend Application Query Performance

This section tests the actual queries used by the Visor I2D backend application with sample parameters to measure real-world performance.

### Department Biodiversity Data by Code (Sample: 52)

- **Execution Time**: 63ms
- **File Location**: applications/dpto/views.py:11-12
- **Purpose**: Retrieve distinct biodiversity data types for a specific department

**Query:**
```sql
SELECT DISTINCT ON (tipo) codigo, nombre, tipo, species, endemicas, exoticas, registers FROM gbif_consultas.dpto_queries WHERE codigo = '52' AND tipo IS NOT NULL LIMIT 10;
```

**Result:**
- **Rows Returned**: 9
```
52|NARIÑO|ANFIBIOS|83|12|0|5580
52|NARIÑO|AVES|1158|11|5|320418
52|NARIÑO|HONGOS|458|1|0|1966
52|NARIÑO|INSECTOS|794|0|3|7810
52|NARIÑO|MAMIFEROS|127|3|3|1483
52|NARIÑO|OTROS|714|1|11|10761
52|NARIÑO|PECES|115|25|4|2105
52|NARIÑO|PLANTAS|5861|397|108|434266
52|NARIÑO|REPTILES|109|5|2|708
```

---

### Department Threatened Species Data (Sample: 52)

- **Execution Time**: 74ms
- **File Location**: applications/dpto/views.py:19-20
- **Purpose**: Retrieve threatened species data for a specific department

**Query:**
```sql
SELECT codigo, nombre, tipo, amenazadas FROM gbif_consultas.dpto_amenazas WHERE codigo = '52' AND tipo IS NOT NULL LIMIT 10;
```

**Result:**
- **Rows Returned**: 3
```
52|NARIÑO|CR|13
52|NARIÑO|EN|48
52|NARIÑO|VU|72
```

---

### Municipality Biodiversity Data by Code (Sample: 05001)

- **Execution Time**: 55ms
- **File Location**: applications/mupio/views.py:11-12
- **Purpose**: Retrieve distinct biodiversity data types for a specific municipality

**Query:**
```sql
SELECT DISTINCT ON (tipo) codigo, nombre, tipo, species, endemicas, exoticas, registers FROM gbif_consultas.mpio_queries WHERE codigo = '05001' AND tipo IS NOT NULL LIMIT 10;
```

**Result:**
- **Rows Returned**: 9
```
05001|MEDELLÍN|ANFIBIOS|45|17|1|798
05001|MEDELLÍN|AVES|709|16|7|163162
05001|MEDELLÍN|HONGOS|545|0|0|3656
05001|MEDELLÍN|INSECTOS|906|0|5|53586
05001|MEDELLÍN|MAMIFEROS|97|7|5|1617
05001|MEDELLÍN|OTROS|142|0|4|1148
05001|MEDELLÍN|PECES|14|6|1|41
05001|MEDELLÍN|PLANTAS|3009|258|131|24582
05001|MEDELLÍN|REPTILES|78|10|4|2375
```

---

### Municipality Threatened Species Data (Sample: 05001)

- **Execution Time**: 85ms
- **File Location**: applications/mupio/views.py:19-20
- **Purpose**: Retrieve threatened species data for a specific municipality

**Query:**
```sql
SELECT codigo, nombre, tipo, amenazadas FROM gbif_consultas.mpio_amenazas WHERE codigo = '05001' AND tipo IS NOT NULL LIMIT 10;
```

**Result:**
- **Rows Returned**: 3
```
05001|MEDELLÍN|CR|9
05001|MEDELLÍN|EN|16
05001|MEDELLÍN|VU|35
```

---

### GBIF Information Retrieval

- **Execution Time**: 65ms
- **File Location**: applications/gbif/views.py:19-20
- **Purpose**: Retrieve all GBIF download information and metadata

**Query:**
```sql
SELECT id, download_date, doi FROM gbif_consultas.gbif_info LIMIT 10;
```

**Result:**
- **Rows Returned**: 1
```
1|2024-02-02|https://doi.org/10.15468/dl.hf7rx5
```

---

### Municipality Search by Name (Sample: APART)

- **Execution Time**: 117ms
- **File Location**: applications/mupiopolitico/views.py:13-15
- **Purpose**: Search municipalities by name with accent handling

**Query:**
```sql
SELECT codigo, dpto_nombre, nombre, nombre_unaccented FROM capas_base.mpio_politico WHERE (nombre ILIKE '%APART%' OR nombre_unaccented ILIKE '%APART%') LIMIT 5;
```

**Result:**
- **Rows Returned**: 2
```
05045|ANTIOQUIA|APARTADÓ|APARTADO
23350|CÓRDOBA|LA APARTADA|LA APARTADA
```

---

### GBIF Records Export by Municipality - Alternative (Sample: 05001)

- **Execution Time**: 55ms
- **File Location**: applications/gbif/views.py:52
- **Purpose**: Export GBIF records for a specific municipality (alternative query)

**Query:**
```sql
SELECT 'gbif.gbif table not found - using alternative query' as note, codigo, nombre, tipo, species, registers FROM gbif_consultas.mpio_queries WHERE codigo = '05001' LIMIT 10;
```

**Result:**
- **Rows Returned**: 9
```
gbif.gbif table not found - using alternative query|05001|MEDELLÍN|ANFIBIOS|45|798
gbif.gbif table not found - using alternative query|05001|MEDELLÍN|AVES|709|163162
gbif.gbif table not found - using alternative query|05001|MEDELLÍN|HONGOS|545|3656
gbif.gbif table not found - using alternative query|05001|MEDELLÍN|INSECTOS|906|53586
gbif.gbif table not found - using alternative query|05001|MEDELLÍN|MAMIFEROS|97|1617
gbif.gbif table not found - using alternative query|05001|MEDELLÍN|OTROS|142|1148
gbif.gbif table not found - using alternative query|05001|MEDELLÍN|PECES|14|41
gbif.gbif table not found - using alternative query|05001|MEDELLÍN|PLANTAS|3009|24582
gbif.gbif table not found - using alternative query|05001|MEDELLÍN|REPTILES|78|2375
```

---

### GBIF Records Export by Department - Alternative (Sample: 52)

- **Execution Time**: 63ms
- **File Location**: applications/gbif/views.py:52
- **Purpose**: Export GBIF records for a specific department (alternative query)

**Query:**
```sql
SELECT 'gbif.gbif table not found - using alternative query' as note, codigo, nombre, tipo, species, registers FROM gbif_consultas.dpto_queries WHERE codigo = '52' LIMIT 10;
```

**Result:**
- **Rows Returned**: 9
```
gbif.gbif table not found - using alternative query|52|NARIÑO|INSECTOS|794|7810
gbif.gbif table not found - using alternative query|52|NARIÑO|AVES|1158|320418
gbif.gbif table not found - using alternative query|52|NARIÑO|MAMIFEROS|127|1483
gbif.gbif table not found - using alternative query|52|NARIÑO|OTROS|714|10761
gbif.gbif table not found - using alternative query|52|NARIÑO|ANFIBIOS|83|5580
gbif.gbif table not found - using alternative query|52|NARIÑO|HONGOS|458|1966
gbif.gbif table not found - using alternative query|52|NARIÑO|PECES|115|2105
gbif.gbif table not found - using alternative query|52|NARIÑO|PLANTAS|5861|434266
gbif.gbif table not found - using alternative query|52|NARIÑO|REPTILES|109|708
```

---

### Species List Export by Municipality - Alternative (Sample: 05001)

- **Execution Time**: 71ms
- **File Location**: applications/gbif/views.py:53-56
- **Purpose**: Export distinct species list for a municipality (alternative query)

**Query:**
```sql
SELECT 'gbif.lista_especies_consulta table not found - using alternative query' as note, codigo, nombre, tipo, species, endemicas, exoticas FROM gbif_consultas.mpio_queries WHERE codigo = '05001' LIMIT 10;
```

**Result:**
- **Rows Returned**: 9
```
gbif.lista_especies_consulta table not found - using alternative query|05001|MEDELLÍN|ANFIBIOS|45|17|1
gbif.lista_especies_consulta table not found - using alternative query|05001|MEDELLÍN|AVES|709|16|7
gbif.lista_especies_consulta table not found - using alternative query|05001|MEDELLÍN|HONGOS|545|0|0
gbif.lista_especies_consulta table not found - using alternative query|05001|MEDELLÍN|INSECTOS|906|0|5
gbif.lista_especies_consulta table not found - using alternative query|05001|MEDELLÍN|MAMIFEROS|97|7|5
gbif.lista_especies_consulta table not found - using alternative query|05001|MEDELLÍN|OTROS|142|0|4
gbif.lista_especies_consulta table not found - using alternative query|05001|MEDELLÍN|PECES|14|6|1
gbif.lista_especies_consulta table not found - using alternative query|05001|MEDELLÍN|PLANTAS|3009|258|131
gbif.lista_especies_consulta table not found - using alternative query|05001|MEDELLÍN|REPTILES|78|10|4
```

---

### Species List Export by Department - Alternative (Sample: 52)

- **Execution Time**: 80ms
- **File Location**: applications/gbif/views.py:53-56
- **Purpose**: Export distinct species list for a department (alternative query)

**Query:**
```sql
SELECT 'gbif.lista_especies_consulta table not found - using alternative query' as note, codigo, nombre, tipo, species, endemicas, exoticas FROM gbif_consultas.dpto_queries WHERE codigo = '52' LIMIT 10;
```

**Result:**
- **Rows Returned**: 9
```
gbif.lista_especies_consulta table not found - using alternative query|52|NARIÑO|INSECTOS|794|0|3
gbif.lista_especies_consulta table not found - using alternative query|52|NARIÑO|AVES|1158|11|5
gbif.lista_especies_consulta table not found - using alternative query|52|NARIÑO|MAMIFEROS|127|3|3
gbif.lista_especies_consulta table not found - using alternative query|52|NARIÑO|OTROS|714|1|11
gbif.lista_especies_consulta table not found - using alternative query|52|NARIÑO|ANFIBIOS|83|12|0
gbif.lista_especies_consulta table not found - using alternative query|52|NARIÑO|HONGOS|458|1|0
gbif.lista_especies_consulta table not found - using alternative query|52|NARIÑO|PECES|115|25|4
gbif.lista_especies_consulta table not found - using alternative query|52|NARIÑO|PLANTAS|5861|397|108
gbif.lista_especies_consulta table not found - using alternative query|52|NARIÑO|REPTILES|109|5|2
```

---

### Available Department Codes

- **Execution Time**: 55ms
- **File Location**: System Query
- **Purpose**: List available department codes for testing

**Query:**
```sql
SELECT DISTINCT codigo, nombre FROM gbif_consultas.dpto_queries WHERE codigo IS NOT NULL ORDER BY codigo LIMIT 10;
```

**Result:**
- **Rows Returned**: 10
```
05|ANTIOQUIA
08|ATLÁNTICO
11|BOGOTÁ, D.C.
13|BOLÍVAR
15|BOYACÁ
17|CALDAS
18|CAQUETÁ
19|CAUCA
20|CESAR
23|CÓRDOBA
```

---

### Available Municipality Codes

- **Execution Time**: 64ms
- **File Location**: System Query
- **Purpose**: List available municipality codes for testing

**Query:**
```sql
SELECT DISTINCT codigo, nombre FROM gbif_consultas.mpio_queries WHERE codigo IS NOT NULL ORDER BY codigo LIMIT 10;
```

**Result:**
- **Rows Returned**: 10
```
05001|MEDELLÍN
05002|ABEJORRAL
05004|ABRIAQUÍ
05021|ALEJANDRÍA
05030|AMAGÁ
05031|AMALFI
05034|ANDES
05036|ANGELÓPOLIS
05038|ANGOSTURA
05040|ANORÍ
```

---


## Summary and Recommendations

### Key Findings
- Database audit completed successfully
- All queries executed from container: `visor_i2d_db`
- Backend application queries tested with sample parameters
- Performance metrics captured for all queries
- Results captured for future comparison and troubleshooting

### Performance Summary
- Query execution times recorded in milliseconds
- Row counts documented for result set analysis
- Backend query performance validated with sample data

### Next Steps
1. Compare this report with previous audits to identify changes
2. Address any permission issues identified
3. Create missing schemas if needed
4. Update application configuration based on actual database structure
5. Optimize slow-performing queries based on execution times

### Troubleshooting
If any queries failed, check:
- Container connectivity
- User permissions
- Database availability
- Network configuration
- Table/schema existence

---

**Report End:** 2025-08-15 15:09:05
